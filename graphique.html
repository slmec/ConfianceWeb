<!DOCTYPE html>
<head>

</head>
<body onload="init()">
<canvas id="myChart"></canvas>
<script>
    function init () {
        let tableau = new Array();
        // when a message is received from the page code
        window.onmessage = (event) => {
            if (event.data) {
            var donnees = event.data;
            tableau = JSON.parse("[" + donnees + "]");
            graphique(tableau);
            }
    }
    function graphique(){
        
    const data = {
    labels:[
        'Autonomie',
        'Deresponsabilisation',
        'Relations',
        'Reconnaissance',
        'Surveillance',
        'Depossession'
    ],
    datasets: [{
        label: 'Mon diagnostic',
        data: tableau,
        fill: true,
        backgroundColor: 'rgba(255, 160, 2, 0.2)',
        borderColor: 'rgb(255, 160, 2)',
        pointBackgroundColor: 'rgb(255, 160, 2)',
        pointBorderColor: '#fff',
        pointHoverBackgroundColor: '#fff',
        pointHoverBorderColor: 'rgb(255, 160, 2)'
        }, {
        label: 'Moyenne',
        data: [2, 2, 2, 2, 2, 2],
        fill: true,
        backgroundColor: 'rgba(77, 165, 218, 0.2)',
        borderColor: 'rgb(77, 165, 218)',
        pointBackgroundColor: 'rgb(77, 165, 218)',
        pointBorderColor: '#fff',
        pointHoverBackgroundColor: '#fff',
        pointHoverBorderColor: 'rgb(77, 165, 218)'
        }]
    };

    const config = {
        type: 'radar',
        data: data,
        options: {
            elements: {
            line: {
                borderWidth: 3
            }
            }
        },
    };
    let options = {
        scales: {
            r: {
                angleLines: {
                    display: false
                },
                suggestedMin: 0,
                suggestedMax: 100
            }
        }
    };

    const myChart = new Chart(
        document.getElementById('myChart'),
        config
        );
    }
    }
</script>
</body>